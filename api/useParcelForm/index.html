<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.16.1"/><style data-styled="kcTecB eIrZIb ckiAzd  kYVEKv hpCSHD iURePC gBsmQs bdjxww etpsTQ ieOemc cDJmsW hhaSnk NffxZ liCCxN hfrtdB cYYKED gmXnoP iDzerT ctmFWX jUCAMg ffiiwx fhCUjq hWQbbM gMplqS cUzaxU eMqMyb" data-styled-version="4.4.0">
/* sc-component-id: sc-global-2246408100 */
@font-face{font-family:'IcoMoon';src:url('/dataparcels/static/IcoMoon-Free-5b19fdecc1398211f539eb37dd366511.woff2') format('woff2'), url('/dataparcels/static/IcoMoon-Free-38e41af08b6215babc05c4f3161cb01d.woff') format('woff'), url('/dataparcels/static/IcoMoon-Free-a453b344567040b8c2473bb32d7e0bc3.ttf') format('truetype');} @font-face{font-family:'IcoMoonCustom';src:url('data:font/woff;base64,d09GRgABAAAAAAXoAAsAAAAABZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgD50CE2NtYXAAAAFoAAAAZAAAAGT9I62PZ2FzcAAAAcwAAAAIAAAACAAAABBnbHlmAAAB1AAAAbgAAAG4m4wUGGhlYWQAAAOMAAAANgAAADYWy/lHaGhlYQAAA8QAAAAkAAAAJAcDAz5obXR4AAAD6AAAACQAAAAkHAACVWxvY2EAAAQMAAAAFAAAABQBjAIqbWF4cAAABCAAAAAgAAAAIAANAEpuYW1lAAAEQAAAAYYAAAGGmUoJ+3Bvc3QAAAXIAAAAIAAAACAAAwAAAAMEAAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA5gIDM/80AMwDMwDMAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEAEgAAAAOAAgAAgAGAAEAIOGI4iXmAv/9//8AAAAAACDhiOIk5gH//f//AAH/4x58HeEaBgADAAEAAAAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAMALwGNA84CgwASACwARwAAEyInJjU0NzYzMhcWFRQHBgcGIyEiJyY1NDc2NzY3NjMyFxYVFAcGBwYHBgcGISInJjU0NzY3NjMyFxYXFhcWFRQHBgcGBwYjqjMkJCQkMzMkJRERHBwiAVUzJSQKChARFxcZMiUkBwYLCxAPEhMBQDMkJBEQHBwiGRcXEBEJCgoJERAXFxkBjSQkMzMkJCQkMyIcHBEQJCQzGRcXEBAKCiQkMxQTEw8PCwwGBiQkMyEdHBEQCgoQEBcXGRkXFxARCQoAAQEDAE0DXwPMAAUAACUnCQE3AQGfnAEj/t2cAcBNnQEjASOc/kEAAAEAowBNAv8DzAAFAAAlCQEXCQECYv5BAb+d/t0BI00BwAG/nP7d/t0AAAAAAQBAAOIDwAM/AAUAACUJAScJAQMj/t3+3Z0BwAHA4gEj/t2dAcD+QAAAAAABAEAA2wPAAzcABQAAJQE3CQEXAgD+QJ0BIwEjndsBv53+3QEjnQAAAQAAAAAAAEQydnFfDzz1AAsEAAAAAADZ8Fo/AAAAANnwWj8AAAAAA84DzAAAAAgAAgAAAAAAAAABAAADM/80AAAEAAAAAAADzgABAAAAAAAAAAAAAAAAAAAACQQAAAAAAAAAAAAAAAQAAAAEAAAvBAABAwQAAKMEAABABAAAQAAAAAAACgAUAB4AiACcALIAyADcAAEAAAAJAEgAAwAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA') format('woff'), url('data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg+dAhMAAAC8AAAAYGNtYXD9I62PAAABHAAAAGRnYXNwAAAAEAAAAYAAAAAIZ2x5ZpuMFBgAAAGIAAABuGhlYWQWy/lHAAADQAAAADZoaGVhBwMDPgAAA3gAAAAkaG10eBwAAlUAAAOcAAAAJGxvY2EBjAIqAAADwAAAABRtYXhwAA0ASgAAA9QAAAAgbmFtZZlKCfsAAAP0AAABhnBvc3QAAwAAAAAFfAAAACAAAwQAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADmAgMz/zQAzAMzAMwAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQASAAAAA4ACAACAAYAAQAg4YjiJeYC//3//wAAAAAAIOGI4iTmAf/9//8AAf/jHnwd4RoGAAMAAQAAAAAAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAwAvAY0DzgKDABIALABHAAATIicmNTQ3NjMyFxYVFAcGBwYjISInJjU0NzY3Njc2MzIXFhUUBwYHBgcGBwYhIicmNTQ3Njc2MzIXFhcWFxYVFAcGBwYHBiOqMyQkJCQzMyQlEREcHCIBVTMlJAoKEBEXFxkyJSQHBgsLEA8SEwFAMyQkERAcHCIZFxcQEQkKCgkREBcXGQGNJCQzMyQkJCQzIhwcERAkJDMZFxcQEAoKJCQzFBMTDw8LDAYGJCQzIR0cERAKChAQFxcZGRcXEBEJCgABAQMATQNfA8wABQAAJScJATcBAZ+cASP+3ZwBwE2dASMBI5z+QQAAAQCjAE0C/wPMAAUAACUJARcJAQJi/kEBv53+3QEjTQHAAb+c/t3+3QAAAAABAEAA4gPAAz8ABQAAJQkBJwkBAyP+3f7dnQHAAcDiASP+3Z0BwP5AAAAAAAEAQADbA8ADNwAFAAAlATcJARcCAP5AnQEjASOd2wG/nf7dASOdAAABAAAAAAAARDJ2cV8PPPUACwQAAAAAANnwWj8AAAAA2fBaPwAAAAADzgPMAAAACAACAAAAAAAAAAEAAAMz/zQAAAQAAAAAAAPOAAEAAAAAAAAAAAAAAAAAAAAJBAAAAAAAAAAAAAAABAAAAAQAAC8EAAEDBAAAowQAAEAEAABAAAAAAAAKABQAHgCIAJwAsgDIANwAAQAAAAkASAADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=') format('truetype');} html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;} article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;} body{line-height:1;} ol,ul{list-style:none;} blockquote,q{quotes:none;} blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;} table{border-collapse:collapse;border-spacing:0;} *{box-sizing:border-box;} html{font-family:'Merriweather',serif;height:100%;line-height:1.8em;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:14px;} @media (min-width:480px){html{font-size:16px;}} body{background-color:#ffffff;color:#233544;font-family:'Merriweather',serif;font-weight:400;height:100%;line-height:1.8em;overflow-x:hidden;text-rendering:optimizelegibility;} body[aria-hidden='true']{overflow:hidden;} button{-webkit-appearance:none;background-color:transparent;font-family:inherit;outline:none;border:none;font-size:inherit;color:inherit;} a{color:inherit;-webkit-text-decoration:none;text-decoration:none;} a:focus{outline:none;} ul{margin:0;padding:0;} ul,ol{list-style-type:none;} #___gatsby,#___gatsby > div{height:100%;}
/* sc-component-id: Layout__Box-gmb0vv-1 */
.kcTecB{display:block;height:100%;}.eIrZIb{display:block;margin-bottom:32px;}.ckiAzd{display:block;margin-bottom:16px;}
/* sc-component-id: Layout__Flex-gmb0vv-2 */
.kYVEKv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;display:block;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;} @media screen and (min-width:575px){.kYVEKv{display:block;}} @media screen and (min-width:720px){.kYVEKv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}
/* sc-component-id: Link-m2w6rr-0 */
.ffiiwx{cursor:pointer;color:inherit;background-color:inherit;color:#527fd7;-webkit-text-decoration:none;text-decoration:none;} .ffiiwx:hover{color:#527fd7;-webkit-text-decoration:underline;text-decoration:underline;} .ffiiwx:focus{color:#527fd7;}
/* sc-component-id: List-b218qn-0 */
.fhCUjq{margin-top:16px;margin-bottom:32px;padding-left:1.8em;position:relative;list-style:disc;}
/* sc-component-id: List__ListItem-b218qn-1 */
ol > .hWQbbM{list-style-type:decimal;}
/* sc-component-id: Pre-bon3zz-0 */
.ctmFWX{font-family:'Roboto Mono',monospace;font-size:.8rem;line-height:1.3rem;overflow:auto;padding:1rem;background:#edf7fb;}
/* sc-component-id: Prism-sc-3we07t-0 */
.jUCAMg{font-family:'Roboto Mono',monospace;} .jUCAMg.language-cpp .token.keyword{color:#319dcd;} .jUCAMg.language-cpp .token.tag{color:#ce4133;} .jUCAMg.language-cpp .token.string,.jUCAMg.language-cpp .token.number,.jUCAMg.language-cpp .token.boolean{color:#319dcd;} .jUCAMg.language-cpp .token.comment{color:#9480a2;} .jUCAMg.language-jsx .token.keyword,.jUCAMg.language-js .token.keyword{color:#ce4133;} .jUCAMg.language-jsx .token.tag,.jUCAMg.language-js .token.tag{color:#319dcd;} .jUCAMg.language-jsx .token.string,.jUCAMg.language-js .token.string,.jUCAMg.language-jsx .token.number,.jUCAMg.language-js .token.number,.jUCAMg.language-jsx .token.boolean,.jUCAMg.language-js .token.boolean{color:#319dcd;} .jUCAMg.language-jsx .token.comment,.jUCAMg.language-js .token.comment{color:#9480a2;} .jUCAMg.language-jsx .token.script,.jUCAMg.language-js .token.script{color:#233544;} .jUCAMg.language-jsx .token.script-punctuation,.jUCAMg.language-js .token.script-punctuation{color:#319dcd;} .jUCAMg.language-flow .token.keyword,.jUCAMg.language-flow .token.function{color:#ce4133;} .jUCAMg.language-flow .token.tag{color:#319dcd;} .jUCAMg.language-flow .token.string,.jUCAMg.language-flow .token.number,.jUCAMg.language-flow .token.boolean{color:#319dcd;} .jUCAMg.language-flow .token.comment{color:#9480a2;} .jUCAMg.language-bash .token.comment{color:#9480a2;}
/* sc-component-id: Text-sc-7zuiz3-0 */
.gBsmQs{font-family:'Roboto Mono',monospace;font-size:3rem;font-weight:700;-webkit-letter-spacing:-.02em;-moz-letter-spacing:-.02em;-ms-letter-spacing:-.02em;letter-spacing:-.02em;overflow-wrap:break-word;line-height:1.2em;margin-top:32px;margin-bottom:32px;}.bdjxww{line-height:1.8em;margin-bottom:16px;}.etpsTQ{font-family:'Roboto Mono',monospace;font-size:1rem;font-weight:700;overflow-wrap:break-word;line-height:1.2em;margin-top:32px;margin-bottom:32px;}.ieOemc{font-family:'Roboto Mono',monospace;font-size:.8rem;background-color:#edf7fb;padding:.25rem;border-radius:3px;}.cDJmsW{font-family:'Roboto Mono',monospace;font-size:2.2rem;font-weight:700;-webkit-letter-spacing:-.02em;-moz-letter-spacing:-.02em;-ms-letter-spacing:-.02em;letter-spacing:-.02em;overflow-wrap:break-word;line-height:1.2em;margin-top:64px;margin-bottom:32px;}.hhaSnk{color:#9faaaf;}.NffxZ{font-family:'Roboto Mono',monospace;font-size:1.5rem;font-weight:700;-webkit-letter-spacing:-.02em;-moz-letter-spacing:-.02em;-ms-letter-spacing:-.02em;letter-spacing:-.02em;overflow-wrap:break-word;line-height:1.2em;margin-top:32px;margin-bottom:32px;}.liCCxN{font-style:italic;}.hfrtdB{font-weight:700;}.cYYKED{font-family:'Roboto Mono',monospace;font-size:1rem;font-weight:700;overflow-wrap:break-word;line-height:1.2em;}
/* sc-component-id: NavigationList-sc-1x8abcb-0 */
.cUzaxU{font-family:font('monospace');font-size:.9rem;padding:0 1rem 1rem .5rem;}
/* sc-component-id: ContentNav__Nav-sc-4xhios-0 */
.hpCSHD{background:#ffffff;font-family:'Roboto Mono',monospace;top:0;left:0;position:fixed;width:100%;height:100vh;overflow-y:auto;z-index:200;overscroll-behavior:contain;padding:4rem 1rem 0;display:none;} @media (min-width:65rem){.hpCSHD{display:block;position:-webkit-sticky;position:sticky;width:15rem;padding:0;height:auto;top:.5rem;}}
/* sc-component-id: ContentNav__Wrapper-sc-4xhios-1 */
.iURePC{width:100%;padding:0 1rem;} @media (min-width:720px){.iURePC{width:calc(100% - 15rem);}} @media (min-width:65rem){.iURePC{width:calc(100% - 15rem - 15rem);}}
/* sc-component-id: ContentNav__PageNav-sc-4xhios-2 */
.gMplqS{background:#ffffff;font-family:'Roboto Mono',monospace;top:0;left:0;position:fixed;width:100%;height:100vh;overflow-y:auto;z-index:200;overscroll-behavior:contain;padding:4rem 1rem 0;display:none;} @media (min-width:720px){.gMplqS{display:block;position:-webkit-sticky;position:sticky;width:15rem;padding:0;height:auto;top:.5rem;}}
/* sc-component-id: sc-bdVaJa */
.iDzerT{display:none !important;float:right;width:30%;margin-top:-2rem;margin-bottom:0;margin-left:1rem;} @media (min-width:65rem){.iDzerT{display:block !important;}}</style><link as="script" rel="preload" href="/dataparcels/webpack-runtime-3961b44b5da458f56633.js"/><link as="script" rel="preload" href="/dataparcels/app-63db54b5b2b52cca2783.js"/><link as="script" rel="preload" href="/dataparcels/commons-856fb5e336d23f38b223.js"/><link as="script" rel="preload" href="/dataparcels/component---src-pages-api-use-parcel-form-jsx-339ef695b73b0b45bf39.js"/><link as="fetch" rel="preload" href="/dataparcels/page-data/api/useParcelForm/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div height="100%" class="Layout__Box-gmb0vv-1 kcTecB"><link href="https://fonts.googleapis.com/css?family=Roboto+Mono|Merriweather" rel="stylesheet"/><div display="block,block,flex" class="Layout__Flex-gmb0vv-2 kYVEKv"><nav class="ContentNav__Nav-sc-4xhios-0 hpCSHD">Dataparcels<!-- -->/<!-- --># API<!-- --># Hooks<!-- -->useParcelForm<!-- -->/api/useParcelForm<!-- -->useParcelState<!-- -->/api/useParcelState<!-- -->useParcelBuffer<!-- -->/api/useParcelBuffer<!-- --># Classes<!-- -->Parcel<!-- -->/api/Parcel<!-- -->ChangeRequest<!-- -->/api/ChangeRequest<!-- -->ParcelNode<!-- -->/api/ParcelNode<!-- --># Components<!-- -->ParcelBoundary<!-- -->/api/ParcelBoundary<!-- -->ParcelDrag<!-- -->/api/ParcelDrag<!-- --># Plugins &amp; utilities<!-- -->validation<!-- -->/api/validation<!-- -->cancel<!-- -->/api/cancel</nav><div class="ContentNav__Wrapper-sc-4xhios-1 iURePC"><h1 id="useparcelform" class="Text-sc-7zuiz3-0 gBsmQs">useParcelForm</h1><img src="/dataparcels/static/parcelhoc-baedb7ff26ea00e762a8b5a4b1254630.gif" class="sc-bdVaJa iDzerT"/><p class="Text-sc-7zuiz3-0 bdjxww">The useParcelForm function is a React hook. Its job is to make submittable forms easy to build. It provides a parcel stored in state and an internal buffer to store unsaved changes, and also handles how the parcel responds to changes in React props.</p><p class="Text-sc-7zuiz3-0 bdjxww">This is perfect for creating user interfaces that allow the user to edit data and send changes back to the server.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">import</span> useParcelForm <span class="token keyword">from</span> <span class="token string">&#x27;react-dataparcels/useParcelForm&#x27;</span><span class="token punctuation">;</span></code></pre></div></div><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token type tag">any</span><span class="token punctuation">,</span>
    <span class="token comment">// optional</span>
    updateValue<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span><span class="token punctuation">,</span>
    rebase<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span><span class="token punctuation">,</span>
    onSubmit<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">Function</span><span class="token punctuation">,</span>
    onSubmitUseResult<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span><span class="token punctuation">,</span>
    buffer<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span><span class="token punctuation">,</span>
    debounce<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">number</span><span class="token punctuation">,</span>
    validation<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">Function</span><span class="token punctuation">,</span>
    beforeChange<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">Function</span><span class="token operator">|</span><span class="token type tag">Function</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">The explanations on this page sometimes refer to an &quot;outerParcel&quot; and an &quot;innerParcel&quot;. This is because the useParcelForm hook actually holds two Parcels in state:</p><h4 id="outerparcel" class="Text-sc-7zuiz3-0 etpsTQ">outerParcel</h4><p class="Text-sc-7zuiz3-0 bdjxww">The original data provided via <code class="Text-sc-7zuiz3-0 ieOemc">value</code>. This parcel updates less frequently than innerParcel, only updating when the form is submitted, or if it is instructed to receive a new value via props or via the <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> function.</p><h4 id="innerparcel" class="Text-sc-7zuiz3-0 etpsTQ">innerParcel</h4><p class="Text-sc-7zuiz3-0 bdjxww">A parcel that sits downstream of outerParcel, acting as a buffer to hold on to unsaved changes. It updates each time the user changes the form, or as a result of outerParcel updating.</p><p class="Text-sc-7zuiz3-0 bdjxww">If you&#x27;re interested you can <a href="#Inside-the-hook" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">read more about what&#x27;s inside the hook</a>.</p><h2 id="params" class="Text-sc-7zuiz3-0 cDJmsW"><span class="Text-sc-7zuiz3-0 hhaSnk">Params</span></h2><h3 id="value" class="Text-sc-7zuiz3-0 NffxZ">value</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">value<span class="token punctuation">:</span> <span class="token type tag">any</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">Sets the initial value to be put into useParcelForm&#x27;s Parcel.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// parcel.value is 100</span>

parcel<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set() triggers a change and a re-render</span>
<span class="token comment">// parcel.value is now 200</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">If computing <code class="Text-sc-7zuiz3-0 ieOemc">value</code> is a heavy operation, you can return the value from a function. The function will only be called on initial mount, and is passed the previous value. However, if <code class="Text-sc-7zuiz3-0 ieOemc">updateValue</code> is set to true then the function will be called on every update.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> newValue <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">value</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">prevValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> newValue
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// parcel.value is 100</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">Value can also accept <a href="/dataparcels/parcel-updaters" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcel updaters</a>. These pass the previous data held in state, and expect the new data to be returned. These can be useful for setting <a href="/dataparcels/parcel-meta" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcel meta</a>.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">import</span> asNode <span class="token keyword">from</span> <span class="token string">&#x27;react-dataparcels/asNode&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token function">asNode</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> node
        <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> newValue<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            foo<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h4 id="returning-promises-from-value" class="Text-sc-7zuiz3-0 etpsTQ">Returning promises from value</h4><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">import</span> asyncValue <span class="token keyword">from</span> <span class="token string">&#x27;react-dataparcels/asyncValue&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token function">asyncValue</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// add logic here</span>
        <span class="token keyword">return</span> theValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">It&#x27;s possible to return a value from a promise using the <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> function. The <code class="Text-sc-7zuiz3-0 ieOemc">useParcelForm</code> hook&#x27;s parcel has a value of <code class="Text-sc-7zuiz3-0 ieOemc">undefined</code> until the promise resolves. Once it has resolved, <code class="Text-sc-7zuiz3-0 ieOemc">useParcelForm</code> hook&#x27;s parcel has a value of the result of the async function.</p><p class="Text-sc-7zuiz3-0 bdjxww">When using <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> you will also receive its status via <a href="#valueStatus" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">valueStatus</a>.</p><h3 id="updatevalue" class="Text-sc-7zuiz3-0 NffxZ">updateValue</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">updateValue<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">When <code class="Text-sc-7zuiz3-0 ieOemc">updateValue</code> is set to true during an update, the useParcelForm hook will check to see if <code class="Text-sc-7zuiz3-0 ieOemc">value</code> has changed, and will update its Parcel&#x27;s value if so. This will completely replace any changes that may have happened to the Parcel since the last time <code class="Text-sc-7zuiz3-0 ieOemc">value</code> was put into the Parcel.</p><p class="Text-sc-7zuiz3-0 bdjxww">Note that it will also cause any downstream <a href="/dataparcels/api/useParcelBuffer#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">useParcelBuffer</a> hooks and <a href="/dataparcels/api/ParcelBoundary#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ParcelBoundaries</a> to forget all their buffered changes, unless <a href="#rebase" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">rebase</a> is used.</p><p class="Text-sc-7zuiz3-0 bdjxww">Value changes are detected using <code class="Text-sc-7zuiz3-0 ieOemc">Object.is()</code>, comparing the new <code class="Text-sc-7zuiz3-0 ieOemc">value</code> with the previous one.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token comment">// receivedValue is 100</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> receivedValue<span class="token punctuation">,</span>
    updateValue<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// parcel.value is 100</span>

parcel<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set() triggers a change and a re-render</span>
<span class="token comment">// parcel.value is now 200</span>

<span class="token comment">// if component updates and receivedValue is now 300</span>
<span class="token comment">// then parcel.value is now 300</span></code></pre></div></div><h3 id="rebase" class="Text-sc-7zuiz3-0 NffxZ">rebase</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">rebase<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">As described above, updates caused by <code class="Text-sc-7zuiz3-0 ieOemc">updateValue</code> (or <code class="Text-sc-7zuiz3-0 ieOemc">onSubmitUseResult</code>) will cause any downstream <a href="/dataparcels/api/useParcelBuffer#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">useParcelBuffer</a> hooks and <a href="/dataparcels/api/ParcelBoundary#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ParcelBoundaries</a> to forget all their buffered changes. This is safe default behaviour because changes in the downstream buffers may not be compatible with the new Parcel&#x27;s data shape. However it may be user unfriendly in some cases, depending on when and how often the parcel updates.</p><p class="Text-sc-7zuiz3-0 bdjxww">Setting <code class="Text-sc-7zuiz3-0 ieOemc">rebase</code> to true will prevent downstream buffers from being cleared. This can allow the user to continue editing data seamlessly while new changes are received.</p><h4 id="please-note" class="Text-sc-7zuiz3-0 etpsTQ">Please note</h4><p class="Text-sc-7zuiz3-0 bdjxww">Only use this if the shape of your data does not change, so that downstream buffered changes are compatible with the new Parcel&#x27;s data shape.</p><p class="Text-sc-7zuiz3-0 bdjxww">This restriction will be lifted in future with the introduction of a feature known as <em class="Text-sc-7zuiz3-0 liCCxN">rekey</em>.</p><h3 id="onsubmit" class="Text-sc-7zuiz3-0 NffxZ">onSubmit</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">onSubmit<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>parcel<span class="token punctuation">:</span> Parcel<span class="token punctuation">,</span> changeRequest<span class="token punctuation">:</span> ChangeRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token type tag">any</span><span class="token operator">|</span>Promise<span class="token operator">&lt;</span><span class="token type tag">any</span><span class="token operator">&gt;</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">If provided, this function is called on submit. It receives the new <a href="/dataparcels/api/Parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">Parcel</a>, and the <a href="/dataparcels/api/ChangeRequest" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ChangeRequest</a> that was responsible for the change. This function can be used to relay changes further up the React heirarchy.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> receivedValue<span class="token punctuation">,</span>
    <span class="token function-variable function">onSubmit</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">parcel<span class="token punctuation">,</span> changeRequest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// add logic here</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h4 id="returning-promises-from-onsubmit" class="Text-sc-7zuiz3-0 etpsTQ">Returning promises from onSubmit</h4><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">,</span>
    <span class="token function-variable function">onSubmit</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">parcel<span class="token punctuation">,</span> changeRequest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// add logic here</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">It&#x27;s possible to return a promise from <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code>. When doing this, the change does not enter the hook&#x27;s state until the promise resolves.</p><p class="Text-sc-7zuiz3-0 bdjxww">If another change arrives while a promise is still pending, it will be passed through <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> after the first promise is resolved or rejected. This is to ensure that there is only one operation happening at a time. If the first ChangeRequest&#x27;s
promise is rejected, the changes will be merged with the next ChangeRequest when <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> is called the second time.</p><p class="Text-sc-7zuiz3-0 bdjxww">This is discussed in more detail in <a href="/dataparcels/data-synchronisation" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">data synchronisation</a>.</p><h3 id="onsubmituseresult" class="Text-sc-7zuiz3-0 NffxZ">onSubmitUseResult</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">onSubmitUseResult<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">When true, this sets the value of the outerParcel to the return value of <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code>. If <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> returns a promise, the resolved value of the promise will be used.</p><p class="Text-sc-7zuiz3-0 bdjxww">Using <code class="Text-sc-7zuiz3-0 ieOemc">onSubmitUseResult</code> can be useful for receiving data back from a request to write data to a server, as it ensures that outerParcel&#x27;s value is as up-to-date as possible. This is discussed in more detail in <a href="/dataparcels/data-synchronisation#Receiving-data-from-the-server-after-saving" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">data synchronisation</a>.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> receivedValue<span class="token punctuation">,</span>
    <span class="token function-variable function">onSubmit</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">parcel<span class="token punctuation">,</span> changeRequest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">saveMyData</span><span class="token punctuation">(</span>parcel<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ^ saveMyData send a request to a server to save the data,</span>
        <span class="token comment">// and returns a promise containing the updated data from the server</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onSubmitUseResult<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">Note that it will also cause any downstream <a href="/dataparcels/api/useParcelBuffer#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">useParcelBuffer</a> hooks and <a href="/dataparcels/api/ParcelBoundary#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ParcelBoundaries</a> to forget all their buffered changes, unless <a href="#rebase" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">rebase</a> is used.</p><h3 id="buffer" class="Text-sc-7zuiz3-0 NffxZ">buffer</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">buffer<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">When <code class="Text-sc-7zuiz3-0 ieOemc">buffer</code> is true, changes that occur to <code class="Text-sc-7zuiz3-0 ieOemc">parcel</code> will be caught in useParcelForm&#x27;s buffer, until released explicitly by calling <a href="#submit" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcelControl.submit()</a>, or automatically if <a href="#debounce" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">debounce</a> is being used.</p><p class="Text-sc-7zuiz3-0 bdjxww">When <code class="Text-sc-7zuiz3-0 ieOemc">buffer</code> is false, changes will propagate up to useParcelForm&#x27;s outerParcel immediately.</p><h3 id="debounce" class="Text-sc-7zuiz3-0 NffxZ">debounce</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">debounce<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">number</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">If set, <code class="Text-sc-7zuiz3-0 ieOemc">debounce</code> will debounce any changes that enter the buffer. The number indicates the number of milliseconds to debounce.</p><p class="Text-sc-7zuiz3-0 bdjxww">This can be used to make <a href="/dataparcels/ui-behaviour#Autosaving-forms" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">autosaving forms</a>.</p><h4 id="debouncing-explained" class="Text-sc-7zuiz3-0 etpsTQ">Debouncing explained</h4><p class="Text-sc-7zuiz3-0 bdjxww">When the <code class="Text-sc-7zuiz3-0 ieOemc">parcel</code> sends a change, the useParelForm hook will catch it and prevent it from being propagated up to useParcelForm&#x27;s outerParcel.</p><p class="Text-sc-7zuiz3-0 bdjxww">The useParcelForm hooks waits until no new changes have occured for <code class="Text-sc-7zuiz3-0 ieOemc">debounce</code> number of milliseconds. It then releases all the changes it has buffered, all together in a single change request.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> receivedValue<span class="token punctuation">,</span>
    <span class="token function-variable function">onSubmit</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">parcel<span class="token punctuation">,</span> changeRequest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// add logic here</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    debounce<span class="token punctuation">:</span> <span class="token number">500</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h3 id="validation" class="Text-sc-7zuiz3-0 NffxZ">validation</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">validation<span class="token operator">?</span><span class="token punctuation">:</span> ParcelValidationFunction <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">Applies <a href="/dataparcels/api/validation" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">validation</a> to the form. <a href="/dataparcels/ui-behaviour#Validation-on-user-input" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">See an example here</a>.</p><p class="Text-sc-7zuiz3-0 bdjxww">If the validation config doesn&#x27;t need to change after initial mount, it can be returned from a function. The function will only be called on initial mount and the validation will be cached from then on.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">import</span> validation <span class="token keyword">from</span> <span class="token string">&#x27;dataparcels/validation&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> validation <span class="token keyword">from</span> <span class="token string">&#x27;react-dataparcels/validation&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&#x27;unknown&#x27;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">validation</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">validation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&#x27;name&#x27;</span><span class="token punctuation">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Name must not be blank</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// or</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&#x27;unknown&#x27;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    validation<span class="token punctuation">:</span> <span class="token function">validation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&#x27;name&#x27;</span><span class="token punctuation">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Name must not be blank</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h3 id="beforechange" class="Text-sc-7zuiz3-0 NffxZ">beforeChange</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">beforeChange<span class="token operator">?</span><span class="token punctuation">:</span> ParcelUpdater<span class="token operator">|</span>ParcelUpdater<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// optional</span>

<span class="token keyword">type</span> <span class="token function-variable function">ParcelUpdater</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token type tag">any</span><span class="token punctuation">,</span> changeRequest<span class="token punctuation">:</span> ChangeRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token type tag">any</span>
<span class="token keyword">type</span> ParcelUpdater <span class="token operator">=</span> <span class="token function">asNode</span><span class="token punctuation">(</span><span class="token punctuation">(</span>node<span class="token punctuation">:</span> ParcelNode<span class="token punctuation">,</span> changeRequest<span class="token punctuation">:</span> ChangeRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ParcelNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> ParcelUpdater <span class="token operator">=</span> <span class="token function">asChildNodes</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nodes<span class="token punctuation">:</span> <span class="token type tag">any</span><span class="token punctuation">,</span> changeRequest<span class="token punctuation">:</span> ChangeRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token type tag">any</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">The <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code> parameter accepts either a single function, or an array of functions. Whenever a new <code class="Text-sc-7zuiz3-0 ieOemc">value</code> is taken into useParcelForm from params, and whenever the useParcelForm hook recieves a change from below, the change is passed through each <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code> function.</p><p class="Text-sc-7zuiz3-0 bdjxww">Internally the useParcelBuffer hook uses <a href="/dataparcels/api/Parcel#modifyUp()" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">Parcel.modifyUp()</a> on each of the <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code> functions. If more than one function is passed to <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code>, the change will go through the first function in the array first, then the second etc.</p><p class="Text-sc-7zuiz3-0 bdjxww">This is particularly useful for setting <a href="data-editing#Deriving-meta" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">derived data</a>, and plugins such as <a href="/dataparcels/api/validation" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">validation</a> are built to be passed into <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code>.</p><h3 id="please-be-careful" class="Text-sc-7zuiz3-0 NffxZ">Please be careful</h3><p class="Text-sc-7zuiz3-0 bdjxww">This method is safe to use in most simple cases, but in some cases it should not be used:</p><ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM">If the updater gives you a primitive value or childless value, you can return anything.</li><li class="List__ListItem-b218qn-1 hWQbbM">If the updater gives you a value that has children, you can always return a primitive value or childless value.</li><li class="List__ListItem-b218qn-1 hWQbbM">If the updater gives you a value that has children, you can return a value with children <strong class="Text-sc-7zuiz3-0 hfrtdB">only if the shape hasn&#x27;t changed</strong>.</li></ul><p class="Text-sc-7zuiz3-0 bdjxww">To find out why, and what to do about it, please read about <a href="/dataparcels/parcel-updaters" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcel updaters</a>.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token string">&quot;ABC&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">beforeChange</span><span class="token punctuation">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ^ &quot;ABC&quot; will be passed through `beforeChange`</span>
<span class="token comment">// and useParcelForm&#x27;s Parcel will contain a value of &quot;abc&quot;</span>
<span class="token comment">// parcel.value is now &quot;abc&quot;</span>

parcel<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;HELLO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ^ &quot;HELLO&quot; will be passed through `beforeChange`</span>
<span class="token comment">// and useParcelForm&#x27;s Parcel will contain a value of &quot;hello&quot;</span>
<span class="token comment">// parcel.value is now &quot;hello&quot;</span></code></pre></div></div><h2 id="returns" class="Text-sc-7zuiz3-0 cDJmsW"><span class="Text-sc-7zuiz3-0 hhaSnk">Returns</span></h2><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow"><span class="token punctuation">[</span>parcel<span class="token punctuation">:</span> Parcel<span class="token punctuation">,</span> parcelControl<span class="token punctuation">:</span> ParcelHookControl<span class="token punctuation">]</span></code></pre></div></div><h3 id="parcel" class="Text-sc-7zuiz3-0 NffxZ">parcel</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">parcel<span class="token punctuation">:</span> Parcel</code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">The first element of the returned array is the parcel previously referred to as innerParcel. It&#x27;s a Parcel that contains the current state of outerParcel, with all the changes in the buffer applied to it. When buffering is enabled, any changes that <code class="Text-sc-7zuiz3-0 ieOemc">parcel</code> receives will go into the buffer.</p><h3 id="parcelcontrol" class="Text-sc-7zuiz3-0 NffxZ">parcelControl</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">parcelControl<span class="token punctuation">:</span> ParcelHookControl</code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">The second element of the returned array is an object containing data and functions for controlling the hook.</p><h2 id="parcelhookcontrol" class="Text-sc-7zuiz3-0 cDJmsW">ParcelHookControl</h2><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow"><span class="token keyword">type</span> ParcelHookControl <span class="token punctuation">{</span>
    submit<span class="token punctuation">:</span> <span class="token type tag">Function</span><span class="token punctuation">,</span>
    reset<span class="token punctuation">:</span> <span class="token type tag">Function</span><span class="token punctuation">,</span>
    buffered<span class="token punctuation">:</span> <span class="token type tag">boolean</span><span class="token punctuation">,</span>
    actions<span class="token punctuation">:</span> Action<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    valueStatus<span class="token operator">?</span><span class="token punctuation">:</span> Object<span class="token punctuation">,</span>
    submitStatus<span class="token operator">?</span><span class="token punctuation">:</span> Object
<span class="token punctuation">}</span></code></pre></div></div><ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><button class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" type="button"></button><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">submit</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->() =&gt; void<!-- --> </span></div>When called, this function will release all changes in the buffer.</li><li class="List__ListItem-b218qn-1 hWQbbM"><button class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" type="button"></button><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">reset</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->() =&gt; void<!-- --> </span></div>When called, this function will remove all changes in the buffer, and reset the data in `parcel` to be the same as the top Parcel stored in useParcelForm&#x27;s state.</li><li class="List__ListItem-b218qn-1 hWQbbM"><button class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" type="button"></button><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">buffered</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div>This boolean is true when there are any changes in the buffer, or false if the buffer is empty.</li><li class="List__ListItem-b218qn-1 hWQbbM"><button class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" type="button"></button><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">actions</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->Action[]<!-- --> </span></div>An array of actions that are currently in the buffer.</li><li class="List__ListItem-b218qn-1 hWQbbM"><button class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" type="button"></button><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">valueStatus</span> <span class="Text-sc-7zuiz3-0 gmXnoP">?<!-- -->: <!-- -->Object<!-- --> </span></div>This object will exist if `value` is passed an `asyncValue` function. It&#x27;s an object containing information about the current state of the execution of the async `value` function. This is useful if you want to conditionally render elements based on the state of the promise.<ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">status</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->string<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">Status is always one of three possible string values:</p><ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;pending&quot;</code> - if <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code>s promise is pending.</li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;resolved&quot;</code> - if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> was resolved.</li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;rejected&quot;</code> - if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> was rejected.</li></ul></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isPending</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">The <code class="Text-sc-7zuiz3-0 ieOemc">isPending</code> boolean is true if <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code>s promise is pending, otherwise it is false.</p></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isResolved</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">The <code class="Text-sc-7zuiz3-0 ieOemc">isResolved</code> boolean is true if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> was resolved.</p></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isRejected</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">The <code class="Text-sc-7zuiz3-0 ieOemc">isRejected</code> boolean is true if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> was rejected.</p></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">error</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->any<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">If the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> was rejected, this contains the rejected promise&#x27;s payload.</p></li></ul></li><li class="List__ListItem-b218qn-1 hWQbbM"><button class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" type="button"></button><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">submitStatus</span> <span class="Text-sc-7zuiz3-0 gmXnoP">?<!-- -->: <!-- -->Object<!-- --> </span></div>This is an object containing information about the current state of the async `onSubmit` function. This is useful if you want to conditionally render elements based on the state of the promise.<ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">status</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->string<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">Status is always one of four possible string values:</p><ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;idle&quot;</code> - no promises have yet been returned from <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code></li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;pending&quot;</code> - if <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code>s promise is pending.</li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;resolved&quot;</code> - if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> was resolved.</li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;rejected&quot;</code> - if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> was rejected.</li></ul></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isPending</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">The <code class="Text-sc-7zuiz3-0 ieOemc">isPending</code> boolean is true if <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code>s promise is pending, otherwise it is false.</p></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isResolved</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">The <code class="Text-sc-7zuiz3-0 ieOemc">isResolved</code> boolean is true if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> was resolved.</p></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isRejected</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">The <code class="Text-sc-7zuiz3-0 ieOemc">isRejected</code> boolean is true if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> was rejected.</p></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">error</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->any<!-- --> </span></div><p class="Text-sc-7zuiz3-0 bdjxww">If the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">onSubmit</code> was rejected, this contains the rejected promise&#x27;s payload.</p></li></ul></li></ul><h2 id="inside-the-hook" class="Text-sc-7zuiz3-0 cDJmsW">Inside the hook</h2><p class="Text-sc-7zuiz3-0 bdjxww">The useParcelForm hook is a combination of <a href="/dataparcels/api/useParcelState" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">useParcelState</a> and <a href="/dataparcels/api/useParcelBuffer" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">useParcelBuffer</a>.</p><p class="Text-sc-7zuiz3-0 bdjxww">Internally, the hook looks roughly like this:</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js">
<span class="token function-variable function">useParcelForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">hookConfig</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1. Parcel State</span>
    <span class="token comment">//</span>
    <span class="token comment">// holds the original data</span>
    <span class="token comment">// and sends changed data to a callback</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>outerParcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        value<span class="token punctuation">,</span>
        updateValue<span class="token punctuation">,</span>
        onSubmit<span class="token punctuation">,</span>
        onSubmitUseResult
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. Parcel Buffer</span>
    <span class="token comment">//</span>
    <span class="token comment">// buffers the changes that the user has made</span>
    <span class="token comment">// and prevents those changes from being propagated</span>
    <span class="token comment">// back up to state until its ready to be saved</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>innerParcel<span class="token punctuation">,</span> parcelControl<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelBuffer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parcel<span class="token punctuation">:</span> outerParcel<span class="token punctuation">,</span>
        buffer<span class="token punctuation">,</span>
        debounce<span class="token punctuation">,</span>
        beforeChange
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">[</span>innerParcel<span class="token punctuation">,</span> parcelControl<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. Outside of the useParcelForm hook</span>
<span class="token comment">// allow the user to make changes to the data</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>innerParcel<span class="token punctuation">,</span> parcelControl<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelForm</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

innerParcel<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#x27;...&#x27;</span><span class="token punctuation">)</span> <span class="token comment">// etc</span>
parcelControl<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">The &quot;submit&quot; button is really an action that instructs the useParcelBuffer hook to release all of its buffered changes up into the useParcelState hook.</p></div><div class="ContentNav__PageNav-sc-4xhios-2 gMplqS"><ul class="NavigationList-sc-1x8abcb-0 cUzaxU"><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">On this page</span></li></ul><ul class="NavigationList-sc-1x8abcb-0 cUzaxU"><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">useParcelForm</span></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">Params</span></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#value" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">value</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#updatevalue" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">updateValue</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#rebase" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">rebase</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#onsubmit" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">onSubmit</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#onsubmituseresult" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">onSubmitUseResult</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#buffer" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">buffer</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#debounce" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">debounce</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#validation" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">validation</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#beforechange" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">beforeChange</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">Returns</span></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcel</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#parcelcontrol" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcelControl</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">ParcelHookControl</span></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#submit" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">submit</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#reset" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">reset</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#buffered" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">buffered</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#actions" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">actions</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#valuestatus" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">valueStatus</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#submitstatus" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">submitStatus</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">Inside the hook</span></li></ul></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/api/useParcelForm/";window.webpackCompilationHash="d1bcf7ad7f3c85559aab";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-63db54b5b2b52cca2783.js"],"component---src-pages-404-js":["/component---src-pages-404-js-a5bdb73e55d82d603b72.js"],"component---src-pages-api-cancel-jsx":["/component---src-pages-api-cancel-jsx-f2d1750db6424a708134.js"],"component---src-pages-api-change-request-jsx":["/component---src-pages-api-change-request-jsx-486c03ff33ba5406b5ca.js"],"component---src-pages-api-parcel-jsx":["/component---src-pages-api-parcel-jsx-d83f7aeeaa0027eb8ab9.js"],"component---src-pages-api-parcel-boundary-jsx":["/component---src-pages-api-parcel-boundary-jsx-0e5eb83e2ef4430be7f6.js"],"component---src-pages-api-parcel-drag-jsx":["/component---src-pages-api-parcel-drag-jsx-5b6b7bdd46195c0e77e5.js"],"component---src-pages-api-parcel-node-jsx":["/component---src-pages-api-parcel-node-jsx-d61fb2387a933dc46245.js"],"component---src-pages-api-use-parcel-buffer-jsx":["/component---src-pages-api-use-parcel-buffer-jsx-3e9480eb66a82dd9f831.js"],"component---src-pages-api-use-parcel-form-jsx":["/component---src-pages-api-use-parcel-form-jsx-339ef695b73b0b45bf39.js"],"component---src-pages-api-use-parcel-state-jsx":["/component---src-pages-api-use-parcel-state-jsx-2f35adb5e78d70d6fd88.js"],"component---src-pages-api-validation-jsx":["/component---src-pages-api-validation-jsx-4f39517d6b342b8c2e92.js"],"component---src-pages-index-js":["/component---src-pages-index-js-aee0aef4b327f976b1cd.js"]};/*]]>*/</script><script src="/dataparcels/component---src-pages-api-use-parcel-form-jsx-339ef695b73b0b45bf39.js" async=""></script><script src="/dataparcels/commons-856fb5e336d23f38b223.js" async=""></script><script src="/dataparcels/app-63db54b5b2b52cca2783.js" async=""></script><script src="/dataparcels/webpack-runtime-3961b44b5da458f56633.js" async=""></script></body></html>