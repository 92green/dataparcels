<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.16.1"/><style data-styled="kcTecB eIrZIb ckiAzd  kYVEKv hpCSHD iURePC gBsmQs bdjxww cDJmsW hhaSnk NffxZ ieOemc etpsTQ liCCxN hfrtdB cYYKED gmXnoP iDzerT ffiiwx ctmFWX jUCAMg bwhMrV fhCUjq hWQbbM gMplqS cUzaxU eMqMyb" data-styled-version="4.4.0">
/* sc-component-id: sc-global-2246408100 */
@font-face{font-family:'IcoMoon';src:url('/dataparcels/static/IcoMoon-Free-5b19fdecc1398211f539eb37dd366511.woff2') format('woff2'), url('/dataparcels/static/IcoMoon-Free-38e41af08b6215babc05c4f3161cb01d.woff') format('woff'), url('/dataparcels/static/IcoMoon-Free-a453b344567040b8c2473bb32d7e0bc3.ttf') format('truetype');} @font-face{font-family:'IcoMoonCustom';src:url('data:font/woff;base64,d09GRgABAAAAAAXoAAsAAAAABZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgD50CE2NtYXAAAAFoAAAAZAAAAGT9I62PZ2FzcAAAAcwAAAAIAAAACAAAABBnbHlmAAAB1AAAAbgAAAG4m4wUGGhlYWQAAAOMAAAANgAAADYWy/lHaGhlYQAAA8QAAAAkAAAAJAcDAz5obXR4AAAD6AAAACQAAAAkHAACVWxvY2EAAAQMAAAAFAAAABQBjAIqbWF4cAAABCAAAAAgAAAAIAANAEpuYW1lAAAEQAAAAYYAAAGGmUoJ+3Bvc3QAAAXIAAAAIAAAACAAAwAAAAMEAAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA5gIDM/80AMwDMwDMAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEAEgAAAAOAAgAAgAGAAEAIOGI4iXmAv/9//8AAAAAACDhiOIk5gH//f//AAH/4x58HeEaBgADAAEAAAAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAMALwGNA84CgwASACwARwAAEyInJjU0NzYzMhcWFRQHBgcGIyEiJyY1NDc2NzY3NjMyFxYVFAcGBwYHBgcGISInJjU0NzY3NjMyFxYXFhcWFRQHBgcGBwYjqjMkJCQkMzMkJRERHBwiAVUzJSQKChARFxcZMiUkBwYLCxAPEhMBQDMkJBEQHBwiGRcXEBEJCgoJERAXFxkBjSQkMzMkJCQkMyIcHBEQJCQzGRcXEBAKCiQkMxQTEw8PCwwGBiQkMyEdHBEQCgoQEBcXGRkXFxARCQoAAQEDAE0DXwPMAAUAACUnCQE3AQGfnAEj/t2cAcBNnQEjASOc/kEAAAEAowBNAv8DzAAFAAAlCQEXCQECYv5BAb+d/t0BI00BwAG/nP7d/t0AAAAAAQBAAOIDwAM/AAUAACUJAScJAQMj/t3+3Z0BwAHA4gEj/t2dAcD+QAAAAAABAEAA2wPAAzcABQAAJQE3CQEXAgD+QJ0BIwEjndsBv53+3QEjnQAAAQAAAAAAAEQydnFfDzz1AAsEAAAAAADZ8Fo/AAAAANnwWj8AAAAAA84DzAAAAAgAAgAAAAAAAAABAAADM/80AAAEAAAAAAADzgABAAAAAAAAAAAAAAAAAAAACQQAAAAAAAAAAAAAAAQAAAAEAAAvBAABAwQAAKMEAABABAAAQAAAAAAACgAUAB4AiACcALIAyADcAAEAAAAJAEgAAwAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA') format('woff'), url('data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg+dAhMAAAC8AAAAYGNtYXD9I62PAAABHAAAAGRnYXNwAAAAEAAAAYAAAAAIZ2x5ZpuMFBgAAAGIAAABuGhlYWQWy/lHAAADQAAAADZoaGVhBwMDPgAAA3gAAAAkaG10eBwAAlUAAAOcAAAAJGxvY2EBjAIqAAADwAAAABRtYXhwAA0ASgAAA9QAAAAgbmFtZZlKCfsAAAP0AAABhnBvc3QAAwAAAAAFfAAAACAAAwQAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADmAgMz/zQAzAMzAMwAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQASAAAAA4ACAACAAYAAQAg4YjiJeYC//3//wAAAAAAIOGI4iTmAf/9//8AAf/jHnwd4RoGAAMAAQAAAAAAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAwAvAY0DzgKDABIALABHAAATIicmNTQ3NjMyFxYVFAcGBwYjISInJjU0NzY3Njc2MzIXFhUUBwYHBgcGBwYhIicmNTQ3Njc2MzIXFhcWFxYVFAcGBwYHBiOqMyQkJCQzMyQlEREcHCIBVTMlJAoKEBEXFxkyJSQHBgsLEA8SEwFAMyQkERAcHCIZFxcQEQkKCgkREBcXGQGNJCQzMyQkJCQzIhwcERAkJDMZFxcQEAoKJCQzFBMTDw8LDAYGJCQzIR0cERAKChAQFxcZGRcXEBEJCgABAQMATQNfA8wABQAAJScJATcBAZ+cASP+3ZwBwE2dASMBI5z+QQAAAQCjAE0C/wPMAAUAACUJARcJAQJi/kEBv53+3QEjTQHAAb+c/t3+3QAAAAABAEAA4gPAAz8ABQAAJQkBJwkBAyP+3f7dnQHAAcDiASP+3Z0BwP5AAAAAAAEAQADbA8ADNwAFAAAlATcJARcCAP5AnQEjASOd2wG/nf7dASOdAAABAAAAAAAARDJ2cV8PPPUACwQAAAAAANnwWj8AAAAA2fBaPwAAAAADzgPMAAAACAACAAAAAAAAAAEAAAMz/zQAAAQAAAAAAAPOAAEAAAAAAAAAAAAAAAAAAAAJBAAAAAAAAAAAAAAABAAAAAQAAC8EAAEDBAAAowQAAEAEAABAAAAAAAAKABQAHgCIAJwAsgDIANwAAQAAAAkASAADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=') format('truetype');} html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;} article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;} body{line-height:1;} ol,ul{list-style:none;} blockquote,q{quotes:none;} blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;} table{border-collapse:collapse;border-spacing:0;} *{box-sizing:border-box;} html{font-family:'Merriweather',serif;height:100%;line-height:1.8em;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:14px;} @media (min-width:480px){html{font-size:16px;}} body{background-color:#ffffff;color:#233544;font-family:'Merriweather',serif;font-weight:400;height:100%;line-height:1.8em;overflow-x:hidden;text-rendering:optimizelegibility;} body[aria-hidden='true']{overflow:hidden;} button{-webkit-appearance:none;background-color:transparent;font-family:inherit;outline:none;border:none;font-size:inherit;color:inherit;} a{color:inherit;-webkit-text-decoration:none;text-decoration:none;} a:focus{outline:none;} ul{margin:0;padding:0;} ul,ol{list-style-type:none;} #___gatsby,#___gatsby > div{height:100%;}
/* sc-component-id: Layout__Box-gmb0vv-1 */
.kcTecB{display:block;height:100%;}.eIrZIb{display:block;margin-bottom:32px;}.ckiAzd{display:block;margin-bottom:16px;}
/* sc-component-id: Layout__Flex-gmb0vv-2 */
.kYVEKv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;display:block;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;} @media screen and (min-width:575px){.kYVEKv{display:block;}} @media screen and (min-width:720px){.kYVEKv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}
/* sc-component-id: Link-m2w6rr-0 */
.ffiiwx{cursor:pointer;color:inherit;background-color:inherit;color:#527fd7;-webkit-text-decoration:none;text-decoration:none;} .ffiiwx:hover{color:#527fd7;-webkit-text-decoration:underline;text-decoration:underline;} .ffiiwx:focus{color:#527fd7;}
/* sc-component-id: List-b218qn-0 */
.fhCUjq{margin-top:16px;margin-bottom:32px;padding-left:1.8em;position:relative;list-style:disc;}
/* sc-component-id: List__ListItem-b218qn-1 */
ol > .hWQbbM{list-style-type:decimal;}
/* sc-component-id: Pre-bon3zz-0 */
.ctmFWX{font-family:'Roboto Mono',monospace;font-size:.8rem;line-height:1.3rem;overflow:auto;padding:1rem;background:#edf7fb;}
/* sc-component-id: Prism-sc-3we07t-0 */
.jUCAMg{font-family:'Roboto Mono',monospace;} .jUCAMg.language-cpp .token.keyword{color:#319dcd;} .jUCAMg.language-cpp .token.tag{color:#ce4133;} .jUCAMg.language-cpp .token.string,.jUCAMg.language-cpp .token.number,.jUCAMg.language-cpp .token.boolean{color:#319dcd;} .jUCAMg.language-cpp .token.comment{color:#9480a2;} .jUCAMg.language-jsx .token.keyword,.jUCAMg.language-js .token.keyword{color:#ce4133;} .jUCAMg.language-jsx .token.tag,.jUCAMg.language-js .token.tag{color:#319dcd;} .jUCAMg.language-jsx .token.string,.jUCAMg.language-js .token.string,.jUCAMg.language-jsx .token.number,.jUCAMg.language-js .token.number,.jUCAMg.language-jsx .token.boolean,.jUCAMg.language-js .token.boolean{color:#319dcd;} .jUCAMg.language-jsx .token.comment,.jUCAMg.language-js .token.comment{color:#9480a2;} .jUCAMg.language-jsx .token.script,.jUCAMg.language-js .token.script{color:#233544;} .jUCAMg.language-jsx .token.script-punctuation,.jUCAMg.language-js .token.script-punctuation{color:#319dcd;} .jUCAMg.language-flow .token.keyword,.jUCAMg.language-flow .token.function{color:#ce4133;} .jUCAMg.language-flow .token.tag{color:#319dcd;} .jUCAMg.language-flow .token.string,.jUCAMg.language-flow .token.number,.jUCAMg.language-flow .token.boolean{color:#319dcd;} .jUCAMg.language-flow .token.comment{color:#9480a2;} .jUCAMg.language-bash .token.comment{color:#9480a2;}
/* sc-component-id: Text-sc-7zuiz3-0 */
.gBsmQs{font-family:'Roboto Mono',monospace;font-size:3rem;font-weight:700;-webkit-letter-spacing:-.02em;-moz-letter-spacing:-.02em;-ms-letter-spacing:-.02em;letter-spacing:-.02em;overflow-wrap:break-word;line-height:1.2em;margin-top:32px;margin-bottom:32px;}.bdjxww{line-height:1.8em;margin-bottom:16px;}.cDJmsW{font-family:'Roboto Mono',monospace;font-size:2.2rem;font-weight:700;-webkit-letter-spacing:-.02em;-moz-letter-spacing:-.02em;-ms-letter-spacing:-.02em;letter-spacing:-.02em;overflow-wrap:break-word;line-height:1.2em;margin-top:64px;margin-bottom:32px;}.hhaSnk{color:#9faaaf;}.NffxZ{font-family:'Roboto Mono',monospace;font-size:1.5rem;font-weight:700;-webkit-letter-spacing:-.02em;-moz-letter-spacing:-.02em;-ms-letter-spacing:-.02em;letter-spacing:-.02em;overflow-wrap:break-word;line-height:1.2em;margin-top:32px;margin-bottom:32px;}.ieOemc{font-family:'Roboto Mono',monospace;font-size:.8rem;background-color:#edf7fb;padding:.25rem;border-radius:3px;}.etpsTQ{font-family:'Roboto Mono',monospace;font-size:1rem;font-weight:700;overflow-wrap:break-word;line-height:1.2em;margin-top:32px;margin-bottom:32px;}.liCCxN{font-style:italic;}.hfrtdB{font-weight:700;}.cYYKED{font-family:'Roboto Mono',monospace;font-size:1rem;font-weight:700;overflow-wrap:break-word;line-height:1.2em;}
/* sc-component-id: NavigationList-sc-1x8abcb-0 */
.cUzaxU{font-family:font('monospace');font-size:.9rem;padding:0 1rem 1rem .5rem;}
/* sc-component-id: ContentNav__Nav-sc-4xhios-0 */
.hpCSHD{background:#ffffff;font-family:'Roboto Mono',monospace;top:0;left:0;position:fixed;width:100%;height:100vh;overflow-y:auto;z-index:200;overscroll-behavior:contain;padding:4rem 1rem 0;display:none;} @media (min-width:65rem){.hpCSHD{display:block;position:-webkit-sticky;position:sticky;width:15rem;padding:0;height:auto;top:.5rem;}}
/* sc-component-id: ContentNav__Wrapper-sc-4xhios-1 */
.iURePC{width:100%;padding:0 1rem;} @media (min-width:720px){.iURePC{width:calc(100% - 15rem);}} @media (min-width:65rem){.iURePC{width:calc(100% - 15rem - 15rem);}}
/* sc-component-id: ContentNav__PageNav-sc-4xhios-2 */
.gMplqS{background:#ffffff;font-family:'Roboto Mono',monospace;top:0;left:0;position:fixed;width:100%;height:100vh;overflow-y:auto;z-index:200;overscroll-behavior:contain;padding:4rem 1rem 0;display:none;} @media (min-width:720px){.gMplqS{display:block;position:-webkit-sticky;position:sticky;width:15rem;padding:0;height:auto;top:.5rem;}}
/* sc-component-id: sc-bdVaJa */
.iDzerT{display:none !important;float:right;width:30%;margin-top:-2rem;margin-bottom:0;margin-left:1rem;} @media (min-width:65rem){.iDzerT{display:block !important;}}
/* sc-component-id: sc-bwzfXH */
.bwhMrV{background-color:#edf7fb;padding:1rem;margin-bottom:1rem;font-size:.9rem;}</style><link as="script" rel="preload" href="/dataparcels/webpack-runtime-3961b44b5da458f56633.js"/><link as="script" rel="preload" href="/dataparcels/app-63db54b5b2b52cca2783.js"/><link as="script" rel="preload" href="/dataparcels/commons-856fb5e336d23f38b223.js"/><link as="script" rel="preload" href="/dataparcels/component---src-pages-api-use-parcel-state-jsx-2f35adb5e78d70d6fd88.js"/><link as="fetch" rel="preload" href="/dataparcels/page-data/api/useParcelState/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div height="100%" class="Layout__Box-gmb0vv-1 kcTecB"><link href="https://fonts.googleapis.com/css?family=Roboto+Mono|Merriweather" rel="stylesheet"/><div display="block,block,flex" class="Layout__Flex-gmb0vv-2 kYVEKv"><nav class="ContentNav__Nav-sc-4xhios-0 hpCSHD">Dataparcels<!-- -->/<!-- --># API<!-- --># Hooks<!-- -->useParcelForm<!-- -->/api/useParcelForm<!-- -->useParcelState<!-- -->/api/useParcelState<!-- -->useParcelBuffer<!-- -->/api/useParcelBuffer<!-- --># Classes<!-- -->Parcel<!-- -->/api/Parcel<!-- -->ChangeRequest<!-- -->/api/ChangeRequest<!-- -->ParcelNode<!-- -->/api/ParcelNode<!-- --># Components<!-- -->ParcelBoundary<!-- -->/api/ParcelBoundary<!-- -->ParcelDrag<!-- -->/api/ParcelDrag<!-- --># Plugins &amp; utilities<!-- -->validation<!-- -->/api/validation<!-- -->cancel<!-- -->/api/cancel</nav><div class="ContentNav__Wrapper-sc-4xhios-1 iURePC"><h1 id="useparcelstate" class="Text-sc-7zuiz3-0 gBsmQs">useParcelState</h1><img src="/dataparcels/static/parcelhoc-baedb7ff26ea00e762a8b5a4b1254630.gif" class="sc-bdVaJa iDzerT"/><p class="Text-sc-7zuiz3-0 bdjxww">The useParcelState function is a React hook. Its job is to provide you with a <a href="/dataparcels/api/Parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">Parcel</a> stored in React state, and to handle how the parcel responds to changes in React props.</p><p class="Text-sc-7zuiz3-0 bdjxww">By default, useParcelState operates in a similar way to an <a href="https://reactjs.org/docs/uncontrolled-components.html" target="_blank" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">uncontrolled component<span></span></a>, accepting an initial value once on first mount, and then becoming the master of its own state from then on. This behaviour can be changed using the <a href="#updateValue" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">updateValue</a> parameter.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">import</span> useParcelState <span class="token keyword">from</span> <span class="token string">&#x27;react-dataparcels/useParcelState&#x27;</span><span class="token punctuation">;</span></code></pre></div></div><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token type tag">any</span><span class="token punctuation">,</span>
    <span class="token comment">// optional</span>
    updateValue<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span><span class="token punctuation">,</span>
    rebase<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span><span class="token punctuation">,</span>
    onChange<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">Function</span><span class="token punctuation">,</span>
    onChangeUseResult<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span><span class="token punctuation">,</span>
    beforeChange<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">Function</span><span class="token operator">|</span><span class="token type tag">Function</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><div class="sc-bwzfXH bwhMrV">If you want a submittable form, or if you&#x27;d like to debounce your onChange function, consider using <a class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" href="/dataparcels/api/useParcelForm">useParcelForm</a>.</div><h2 id="params" class="Text-sc-7zuiz3-0 cDJmsW"><span class="Text-sc-7zuiz3-0 hhaSnk">Params</span></h2><h3 id="value" class="Text-sc-7zuiz3-0 NffxZ">value</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">value<span class="token punctuation">:</span> <span class="token type tag">any</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">Sets the initial value to be put into useParcelState&#x27;s Parcel.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// parcel.value is 100</span>

parcel<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set() triggers a change and a re-render</span>
<span class="token comment">// parcel.value is now 200</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">If computing <code class="Text-sc-7zuiz3-0 ieOemc">value</code> is a heavy operation, you can return the value from a function. The function will only be called on initial mount, and is passed the previous value. However, if <code class="Text-sc-7zuiz3-0 ieOemc">updateValue</code> is set to true then the function will be called on every update.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> newValue <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">value</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">prevValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> newValue
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// parcel.value is 100</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">Value can also accept <a href="/dataparcels/parcel-updaters" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcel updaters</a>. These pass the previous data held in state, and expect the new data to be returned. These can be useful for setting <a href="/dataparcels/parcel-meta" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcel meta</a>.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">import</span> asNode <span class="token keyword">from</span> <span class="token string">&#x27;react-dataparcels/asNode&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token function">asNode</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> node
        <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> newValue<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            foo<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h4 id="returning-promises-from-value" class="Text-sc-7zuiz3-0 etpsTQ">Returning promises from value</h4><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">import</span> asyncValue <span class="token keyword">from</span> <span class="token string">&#x27;react-dataparcels/asyncValue&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token function">asyncValue</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// add logic here</span>
        <span class="token keyword">return</span> theValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">It&#x27;s possible to return a value from a promise using the <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> function. The <code class="Text-sc-7zuiz3-0 ieOemc">useParcelState</code> hook&#x27;s parcel has a value of <code class="Text-sc-7zuiz3-0 ieOemc">undefined</code> until the promise resolves. Once it has resolved, <code class="Text-sc-7zuiz3-0 ieOemc">useParcelState</code> hook&#x27;s parcel has a value of the result of the async function.</p><p class="Text-sc-7zuiz3-0 bdjxww">When using <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> you will also receive its status via <a href="#valueStatus" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">valueStatus</a>.</p><h3 id="updatevalue" class="Text-sc-7zuiz3-0 NffxZ">updateValue</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">updateValue<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">When <code class="Text-sc-7zuiz3-0 ieOemc">updateValue</code> is set to true during an update, the useParcelState hook will check to see if <code class="Text-sc-7zuiz3-0 ieOemc">value</code> has changed, and will update its Parcel&#x27;s value if so. This will completely replace any changes that may have happened to the Parcel since the last time <code class="Text-sc-7zuiz3-0 ieOemc">value</code> was put into the Parcel.</p><p class="Text-sc-7zuiz3-0 bdjxww">Note that it will also cause any downstream <a href="/dataparcels/api/useParcelBuffer#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">useParcelBuffer</a> hooks and <a href="/dataparcels/api/ParcelBoundary#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ParcelBoundaries</a> to forget all their buffered changes, unless <a href="#rebase" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">rebase</a> is used.</p><p class="Text-sc-7zuiz3-0 bdjxww">Value changes are detected using <code class="Text-sc-7zuiz3-0 ieOemc">Object.is()</code>, comparing the new <code class="Text-sc-7zuiz3-0 ieOemc">value</code> with the previous one.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token comment">// receivedValue is 100</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> receivedValue<span class="token punctuation">,</span>
    updateValue<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// parcel.value is 100</span>

parcel<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set() triggers a change and a re-render</span>
<span class="token comment">// parcel.value is now 200</span>

<span class="token comment">// if component updates and receivedValue is now 300</span>
<span class="token comment">// then parcel.value is now 300</span></code></pre></div></div><h3 id="rebase" class="Text-sc-7zuiz3-0 NffxZ">rebase</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">rebase<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">As described above, updates caused by <code class="Text-sc-7zuiz3-0 ieOemc">updateValue</code> will cause any downstream <a href="/dataparcels/api/useParcelBuffer#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">useParcelBuffer</a> hooks and <a href="/dataparcels/api/ParcelBoundary#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ParcelBoundaries</a> to forget all their buffered changes. This is safe default behaviour because changes in the downstream buffers may not be compatible with the new Parcel&#x27;s data shape. However it may be user unfriendly in some cases, depending on when and how often the parcel updates.</p><p class="Text-sc-7zuiz3-0 bdjxww">Setting <code class="Text-sc-7zuiz3-0 ieOemc">rebase</code> to true will prevent downstream buffers from being cleared.</p><h4 id="please-note" class="Text-sc-7zuiz3-0 etpsTQ">Please note</h4><p class="Text-sc-7zuiz3-0 bdjxww">Only use this if the shape of your data does not change, so that downstream buffered changes are compatible with the new Parcel&#x27;s data shape.</p><p class="Text-sc-7zuiz3-0 bdjxww">This restriction will be lifted in future with the introduction of a feature known as <em class="Text-sc-7zuiz3-0 liCCxN">rekey</em>.</p><h3 id="onchange" class="Text-sc-7zuiz3-0 NffxZ">onChange</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">onChange<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>parcel<span class="token punctuation">:</span> Parcel<span class="token punctuation">,</span> changeRequest<span class="token punctuation">:</span> ChangeRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token type tag">any</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">If provided, this function is called whenever useParcelState&#x27;s Parcel has handled a change. It receives the new <a href="/dataparcels/api/Parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">Parcel</a>, and the <a href="/dataparcels/api/ChangeRequest" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ChangeRequest</a> that was responsible for the change.</p><p class="Text-sc-7zuiz3-0 bdjxww">This function can be used to relay changes further up the React heirarchy.</p><p class="Text-sc-7zuiz3-0 bdjxww">Please keep in mind that it is possible for a change to result in the same data being contained in the Parcel, <code class="Text-sc-7zuiz3-0 ieOemc">onChange</code> will not dedupe subsequent calls whose Parcels contain the same data. <a href="/dataparcels/api/ChangeRequest#hasValueChanged" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ChangeRequest.hasValueChanged()</a> can help with that.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">,</span>
    <span class="token function-variable function">onChange</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">parcel<span class="token punctuation">,</span> changeRequest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// add logic here</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h4 id="returning-promises-from-onchange" class="Text-sc-7zuiz3-0 etpsTQ">Returning promises from onChange</h4><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">import</span> asyncChange <span class="token keyword">from</span> <span class="token string">&#x27;react-dataparcels/asyncChange&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">,</span>
    onChange<span class="token punctuation">:</span> <span class="token function">asyncChange</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">parcel<span class="token punctuation">,</span> changeRequest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// add logic here</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">It&#x27;s possible to return a promise from <code class="Text-sc-7zuiz3-0 ieOemc">onChange</code> using the <code class="Text-sc-7zuiz3-0 ieOemc">asyncChange</code> function. When doing this, the change does not enter the hook&#x27;s state until the promise resolves.</p><p class="Text-sc-7zuiz3-0 bdjxww">If another change arrives while a promise is still pending, it will be passed through <code class="Text-sc-7zuiz3-0 ieOemc">onChange</code> after the first promise is resolved or rejected. This is to ensure that there is only one operation happening at a time. If the first ChangeRequest&#x27;s
promise is rejected, the changes will be merged with the next ChangeRequest when <code class="Text-sc-7zuiz3-0 ieOemc">onChange</code> is called the second time.</p><p class="Text-sc-7zuiz3-0 bdjxww">This is discussed in more detail in <a href="/dataparcels/data-synchronisation" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">data synchronisation</a>.</p><p class="Text-sc-7zuiz3-0 bdjxww">When using <code class="Text-sc-7zuiz3-0 ieOemc">asyncChange</code> you will also receive its status via <a href="#changeStatus" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">changeStatus</a>.</p><h3 id="onchangeuseresult" class="Text-sc-7zuiz3-0 NffxZ">onChangeUseResult</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">onChangeUseResult<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token type tag">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// optional</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">When true, this sets the value of the hook&#x27;s parcel to the return value of <code class="Text-sc-7zuiz3-0 ieOemc">onChange</code>.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> receivedValue<span class="token punctuation">,</span>
    <span class="token function-variable function">onChange</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">parcel<span class="token punctuation">,</span> changeRequest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">saveMyData</span><span class="token punctuation">(</span>parcel<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ^ saveMyData send a request to a server to save the data,</span>
        <span class="token comment">// and returns a promise containing the updated data from the server</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onChangeUseResult<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">Note that it will also cause any downstream <a href="/dataparcels/api/useParcelBuffer#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">useParcelBuffer</a> hooks and <a href="/dataparcels/api/ParcelBoundary#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">ParcelBoundaries</a> to forget all their buffered changes, unless <a href="#rebase" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">rebase</a> is used.</p><h3 id="beforechange" class="Text-sc-7zuiz3-0 NffxZ">beforeChange</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">beforeChange<span class="token operator">?</span><span class="token punctuation">:</span> ParcelUpdater<span class="token operator">|</span>ParcelUpdater<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// optional</span>

<span class="token keyword">type</span> <span class="token function-variable function">ParcelUpdater</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token type tag">any</span><span class="token punctuation">,</span> changeRequest<span class="token punctuation">:</span> ChangeRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token type tag">any</span>
<span class="token keyword">type</span> ParcelUpdater <span class="token operator">=</span> <span class="token function">asNode</span><span class="token punctuation">(</span><span class="token punctuation">(</span>node<span class="token punctuation">:</span> ParcelNode<span class="token punctuation">,</span> changeRequest<span class="token punctuation">:</span> ChangeRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ParcelNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> ParcelUpdater <span class="token operator">=</span> <span class="token function">asChildNodes</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nodes<span class="token punctuation">:</span> <span class="token type tag">any</span><span class="token punctuation">,</span> changeRequest<span class="token punctuation">:</span> ChangeRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token type tag">any</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">The <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code> parameter accepts either a single function, or an array of functions. Whenever a new <code class="Text-sc-7zuiz3-0 ieOemc">value</code> is taken into useParcelState from params, and whenever the useParcelState hook recieves a change from below, the change is passed through each <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code> function.</p><p class="Text-sc-7zuiz3-0 bdjxww">Internally the useParcelBuffer hook uses <a href="/dataparcels/api/Parcel#modifyUp()" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">Parcel.modifyUp()</a> on each of the <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code> functions. If more than one function is passed to <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code>, the change will go through the first function in the array first, then the second etc.</p><p class="Text-sc-7zuiz3-0 bdjxww">This is particularly useful for setting <a href="data-editing#Deriving-meta" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">derived data</a>, and plugins such as <a href="/dataparcels/api/validation" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">validation</a> are built to be passed into <code class="Text-sc-7zuiz3-0 ieOemc">beforeChange</code>.</p><h3 id="please-be-careful" class="Text-sc-7zuiz3-0 NffxZ">Please be careful</h3><p class="Text-sc-7zuiz3-0 bdjxww">This method is safe to use in most simple cases, but in some cases it should not be used:</p><ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM">If the updater gives you a primitive value or childless value, you can return anything.</li><li class="List__ListItem-b218qn-1 hWQbbM">If the updater gives you a value that has children, you can always return a primitive value or childless value.</li><li class="List__ListItem-b218qn-1 hWQbbM">If the updater gives you a value that has children, you can return a value with children <strong class="Text-sc-7zuiz3-0 hfrtdB">only if the shape hasn&#x27;t changed</strong>.</li></ul><p class="Text-sc-7zuiz3-0 bdjxww">To find out why, and what to do about it, please read about <a href="/dataparcels/parcel-updaters" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcel updaters</a>.</p><div class="gatsby-highlight" data-language="js"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>parcel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useParcelState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token string">&quot;ABC&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">beforeChange</span><span class="token punctuation">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ^ &quot;ABC&quot; will be passed through `beforeChange`</span>
<span class="token comment">// and useParcelState&#x27;s Parcel will contain a value of &quot;abc&quot;</span>
<span class="token comment">// parcel.value is now &quot;abc&quot;</span>

parcel<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;HELLO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ^ &quot;HELLO&quot; will be passed through `beforeChange`</span>
<span class="token comment">// and useParcelState&#x27;s Parcel will contain a value of &quot;hello&quot;</span>
<span class="token comment">// parcel.value is now &quot;hello&quot;</span></code></pre></div></div><h2 id="returns" class="Text-sc-7zuiz3-0 cDJmsW"><span class="Text-sc-7zuiz3-0 hhaSnk">Returns</span></h2><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow"><span class="token punctuation">[</span>parcel<span class="token punctuation">:</span> Parcel<span class="token punctuation">,</span> parcelControl<span class="token punctuation">:</span> ParcelHookControl<span class="token punctuation">]</span></code></pre></div></div><h3 id="parcel" class="Text-sc-7zuiz3-0 NffxZ">parcel</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">parcel<span class="token punctuation">:</span> Parcel</code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">The first element of the returned array is the parcel that this hook holds in React state.</p><h3 id="parcelcontrol" class="Text-sc-7zuiz3-0 NffxZ">parcelControl</h3><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow">parcelControl<span class="token punctuation">:</span> ParcelHookControl</code></pre></div></div><p class="Text-sc-7zuiz3-0 bdjxww">The second element of the returned array is an object containing data and functions for controlling the hook.</p><h2 id="parcelhookcontrol" class="Text-sc-7zuiz3-0 cDJmsW">ParcelHookControl</h2><div class="gatsby-highlight" data-language="flow"><div class="Layout__Box-gmb0vv-1 eIrZIb"><pre class="Pre-bon3zz-0 ctmFWX"><code class="Prism-sc-3we07t-0 jUCAMg language-flow"><span class="token keyword">type</span> ParcelHookControl <span class="token punctuation">{</span>
    valueStatus<span class="token operator">?</span><span class="token punctuation">:</span> Object<span class="token punctuation">,</span>
    changeStatus<span class="token operator">?</span><span class="token punctuation">:</span> Object
<span class="token punctuation">}</span></code></pre></div></div><ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><button class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" type="button"></button><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">valueStatus</span> <span class="Text-sc-7zuiz3-0 gmXnoP">?<!-- -->: <!-- -->Object<!-- --> </span></div>This object will exist if `value` is passed an `asyncValue` function. It&#x27;s an object containing information about the current state of the execution of the async `value` function. This is useful if you want to conditionally render elements based on the state of the promise.<ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">status</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->string<!-- --> </span></div>Status is always one of three possible string values:<ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;pending&quot;</code> - if <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code>s promise is pending.</li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;resolved&quot;</code> - if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> was resolved.</li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;rejected&quot;</code> - if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncValue</code> was rejected.</li></ul></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isPending</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div>The `isPending` boolean is true if `asyncValue`s promise is pending, otherwise it is false.</li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isResolved</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div>The `isResolved` boolean is true if the last promise returned from `asyncValue` was resolved.</li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isRejected</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div>The `isRejected` boolean is true if the last promise returned from `asyncValue` was rejected.</li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">error</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->any<!-- --> </span></div>If the last promise returned from `asyncValue` was rejected, this contains the rejected promise&#x27;s payload.</li></ul></li><li class="List__ListItem-b218qn-1 hWQbbM"><button class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx" type="button"></button><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">changeStatus</span> <span class="Text-sc-7zuiz3-0 gmXnoP">?<!-- -->: <!-- -->Object<!-- --> </span></div>This object will exist if `onChange` is passed an `asyncChange` function. It&#x27;s an object containing information about the current state of the execution of the async `onChange` function. This is useful if you want to conditionally render elements based on the state of the promise.<ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">status</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->string<!-- --> </span></div>Status is always one of four possible string values:<ul class="List-b218qn-0 fhCUjq"><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;idle&quot;</code> - no promises have yet been returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncChange</code></li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;pending&quot;</code> - if <code class="Text-sc-7zuiz3-0 ieOemc">asyncChange</code>s promise is pending.</li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;resolved&quot;</code> - if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncChange</code> was resolved.</li><li class="List__ListItem-b218qn-1 hWQbbM"><code class="Text-sc-7zuiz3-0 ieOemc">&quot;rejected&quot;</code> - if the last promise returned from <code class="Text-sc-7zuiz3-0 ieOemc">asyncChange</code> was rejected.</li></ul></li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isPending</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div>The `isPending` boolean is true if `asyncChange`s promise is pending, otherwise it is false.</li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isResolved</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div>The `isResolved` boolean is true if the last promise returned from `asyncChange` was resolved.</li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">isRejected</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->boolean<!-- --> </span></div>The `isRejected` boolean is true if the last promise returned from `asyncChange` was rejected.</li><li class="List__ListItem-b218qn-1 hWQbbM"><div class="Layout__Box-gmb0vv-1 ckiAzd"><span class="Text-sc-7zuiz3-0 cYYKED">error</span> <span class="Text-sc-7zuiz3-0 gmXnoP">: <!-- -->any<!-- --> </span></div>If the last promise returned from `asyncChange` was rejected, this contains the rejected promise&#x27;s payload.</li></ul></li></ul></div><div class="ContentNav__PageNav-sc-4xhios-2 gMplqS"><ul class="NavigationList-sc-1x8abcb-0 cUzaxU"><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">On this page</span></li></ul><ul class="NavigationList-sc-1x8abcb-0 cUzaxU"><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">useParcelState</span></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">Params</span></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#value" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">value</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#updatevalue" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">updateValue</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#rebase" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">rebase</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#onchange" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">onChange</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#onchangeuseresult" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">onChangeUseResult</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#beforechange" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">beforeChange</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">Returns</span></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#parcel" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcel</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#parcelcontrol" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">parcelControl</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><span class="Text-sc-7zuiz3-0 hhaSnk">ParcelHookControl</span></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#valuestatus" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">valueStatus</a></li><li class="NavigationList__NavigationListItem-sc-1x8abcb-1 eMqMyb"><a href="#changestatus" class="Clickable-ka2glj-0 Link-m2w6rr-0 ffiiwx">changeStatus</a></li></ul></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/api/useParcelState/";window.webpackCompilationHash="d1bcf7ad7f3c85559aab";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-63db54b5b2b52cca2783.js"],"component---src-pages-404-js":["/component---src-pages-404-js-a5bdb73e55d82d603b72.js"],"component---src-pages-api-cancel-jsx":["/component---src-pages-api-cancel-jsx-f2d1750db6424a708134.js"],"component---src-pages-api-change-request-jsx":["/component---src-pages-api-change-request-jsx-486c03ff33ba5406b5ca.js"],"component---src-pages-api-parcel-jsx":["/component---src-pages-api-parcel-jsx-d83f7aeeaa0027eb8ab9.js"],"component---src-pages-api-parcel-boundary-jsx":["/component---src-pages-api-parcel-boundary-jsx-0e5eb83e2ef4430be7f6.js"],"component---src-pages-api-parcel-drag-jsx":["/component---src-pages-api-parcel-drag-jsx-5b6b7bdd46195c0e77e5.js"],"component---src-pages-api-parcel-node-jsx":["/component---src-pages-api-parcel-node-jsx-d61fb2387a933dc46245.js"],"component---src-pages-api-use-parcel-buffer-jsx":["/component---src-pages-api-use-parcel-buffer-jsx-3e9480eb66a82dd9f831.js"],"component---src-pages-api-use-parcel-form-jsx":["/component---src-pages-api-use-parcel-form-jsx-339ef695b73b0b45bf39.js"],"component---src-pages-api-use-parcel-state-jsx":["/component---src-pages-api-use-parcel-state-jsx-2f35adb5e78d70d6fd88.js"],"component---src-pages-api-validation-jsx":["/component---src-pages-api-validation-jsx-4f39517d6b342b8c2e92.js"],"component---src-pages-index-js":["/component---src-pages-index-js-aee0aef4b327f976b1cd.js"]};/*]]>*/</script><script src="/dataparcels/component---src-pages-api-use-parcel-state-jsx-2f35adb5e78d70d6fd88.js" async=""></script><script src="/dataparcels/commons-856fb5e336d23f38b223.js" async=""></script><script src="/dataparcels/app-63db54b5b2b52cca2783.js" async=""></script><script src="/dataparcels/webpack-runtime-3961b44b5da458f56633.js" async=""></script></body></html>