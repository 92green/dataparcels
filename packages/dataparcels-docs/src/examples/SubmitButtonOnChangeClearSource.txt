import React from 'react';
import useParcelForm from 'react-dataparcels/useParcelForm';
import ParcelBoundary from 'react-dataparcels/ParcelBoundary';

const initialValue = {
    firstname: "",
    lastname: ""
};

export default function SignUpForm(props) {

    let [personParcel, personParcelBuffer] = useParcelForm({
        value: initialValue,
        onChange: async (parcel) => {
            await saveMyData(parcel.value);
            return initialValue;
        },
        onChangeUseResult: true
    });

    return <div>
        <label>firstname</label>
        <ParcelBoundary parcel={personParcel.get('firstname')}>
            {(firstname) => <input type="text" {...firstname.spreadDOM()} />}
        </ParcelBoundary>

        <label>lastname</label>
        <ParcelBoundary parcel={personParcel.get('lastname')}>
            {(lastname) => <input type="text" {...lastname.spreadDOM()} />}
        </ParcelBoundary>

        <button onClick={() => personParcelBuffer.submit()}>Submit</button>
    </div>;
}
